@using AlDS.Coursework.Board.UserModel
@using Microsoft.AspNetCore.Identity
@using AlDS.Coursework.Board.BoardModel
@using AlDS.Coursework.Board.RelatedTablesModel
@using AlDS.Coursework.WebApplicationTest.Data

@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

@model AlDS.Coursework.Board.BoardModel.Note
@{
    Layout = "../../Pages/Shared/_Layout.cshtml";
}


<div class="person_main_page">
    
    <header class="Title">
        <div class="headers_link">
            <a class="identity" href="../../../Person/Index/?email=@User.Identity.Name">Вернуться на ту страницу</a>
            <a class="identity" href="https://localhost:7240/">На главную</a>
            <div class="identity">
                <form class="button_identity" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Page("/", new { area = "" })" method="post" >
                <button class="button_identity" type="submit">Выйти из аккаунта</button>
                </form>
            </div>
        </div>
        <div class="icon">
            <span class="icon_size"><i class="bi bi-tablet-landscape"></i></span>
        </div>
    </header>

	<div class="note">
        <div class="dropdown">
        <button onclick="myFunction()" class="dropbtn">@Model.Title</button>
          <div id="myDropdown" class="dropdown-content">
            <a href="../Delete/?id=@Model.NoteId">Удалить</a>
            <a href="#">Изменить название</a>
          </div>
        </div>
		<div class="note_title">
			<p>@Model.Description</p>
		</div>
		<div class="note_text">
			            <form asp-action="Edit" method="post">
                        <input type="hidden" asp-for="NoteId" value = @Model.NoteId/>
                        <input type="hidden" name="CreatorId" value = @Model.CreatorId>
                        <input type="hidden" name ="CardId" value = @Model.CardId>

                        <input type="hidden" name="Title" value=@Model.Title />
                        <input type="hidden" name="Description" value=@Model.Description/>
                        <p><textarea class="txtarea" name="Text">@Model.Text</textarea></p>

                        <input type="hidden" name="id" value=@Model.NoteId />

                        <input formaction="../Edit" type="submit" value="Сохранить изменения" />

                </form>
		</div>

	</div>

</div>



<script>
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>


